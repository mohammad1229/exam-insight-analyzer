
const fs = require('fs');
const path = require('path');

// Read the current package.json
const packageJsonPath = path.join(__dirname, 'package.json');
const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8'));

// Add Electron configuration
packageJson.main = 'src/electronMain.js';
packageJson.version = '1.0.0';
packageJson.description = 'نظام تحليل نتائج الاختبارات المدرسية - النسخة المكتبية';
packageJson.author = {
  name: "محمد الشوامرة",
  email: "info@examsystem.com"
};
packageJson.scripts = {
  ...packageJson.scripts,
  "start": "vite",
  "build": "vite build",
  "electron:dev": "concurrently \"vite\" \"wait-on http://localhost:8080 && electron .\"",
  "electron:build": "vite build && electron-builder",
  "electron:build:win": "vite build && electron-builder --win",
  "electron:build:mac": "vite build && electron-builder --mac",
  "electron:build:linux": "vite build && electron-builder --linux",
  "postinstall": "electron-builder install-app-deps"
};

// Save the updated package.json
fs.writeFileSync(packageJsonPath, JSON.stringify(packageJson, null, 2));

console.log('Updated package.json with Electron configuration');

// Instruction for next steps
console.log('\nTo complete Electron setup, install required dependencies:');
console.log('npm install --save-dev electron@latest electron-builder concurrently wait-on sqlite3');
console.log('\nCreate resources folder with app icons:');
console.log('mkdir -p resources');
console.log('\nThen run the Electron app in development:');
console.log('npm run electron:dev');
console.log('\nOr build the desktop app:');
console.log('npm run electron:build');

// Create a placeholder icon file in the resources directory
const resourcesDir = path.join(__dirname, 'resources');
if (!fs.existsSync(resourcesDir)) {
  fs.mkdirSync(resourcesDir, { recursive: true });
}

// Create placeholder icon file if it doesn't exist
const iconFilePath = path.join(resourcesDir, 'icon.png');
if (!fs.existsSync(iconFilePath)) {
  console.log('\nCreating placeholder icon file. Replace it with your actual icon.');
  
  // This is a simple script to create a very basic icon
  // In a real app, you would replace this with actual icon files
  const defaultIconContent = Buffer.from(
    'iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF7GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA1LTEzVDE0OjIzOjEzKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNS0xM1QxNDoyNDowMiswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wNS0xM1QxNDoyNDowMiswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpmODY1OTg3OS04MmE4LTg0NDAtOGIxMy0wNTBmNWI3NzhlNzAiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0OWI0ZmIyMS1hMTk1LTExNDMtYjA0MS1jMWZhMDcwYzBmMjQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MGM3ZmQ1Yi1jNGQ2LWJkNGYtODM5OC1kMjYwNDY3Nzc4MWQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjcwYzdmZDViLWM0ZDYtYmQ0Zi04Mzk4LWQyNjA0Njc3NzgxZCIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0xM1QxNDoyMzoxMyswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmODY1OTg3OS04MmE4LTg0NDAtOGIxMy0wNTBmNWI3NzhlNzAiIHN0RXZ0OndoZW49IjIwMjAtMDUtMTNUMTQ6MjQ6MDIrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7gdQP+AAATo0lEQVR42u2dCXBUVZrH/0kn6U7S3dnpbDpdne5KOiGEsAcQUEBAQNlxAUURcJldZBGEQUQWRZFhUVB2HUSUTUTZQVZZFQFBAQFBCIEsZO9OOp10J51ea95371ddDZN0ek28d+vc+lV9lc5S957zP9/5vnPuuRcalUql2la1L0qECoAAQAAQAAgAAoAAIAAIAAKAACAACAACgAAgAAgAAoAAIAAIAAKAACAACAACgAAgAAgAAoAAIAAIAAIAAoAAIAAIAAKAACAA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',
    'base64'
  );
  
  fs.writeFileSync(iconFilePath, defaultIconContent);
}

console.log('\nElectron setup complete! You can now run the app using:');
console.log('npm run electron:dev');
console.log('\nOr build the desktop app:');
console.log('npm run electron:build');
